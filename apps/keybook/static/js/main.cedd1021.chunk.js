(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n(69)},30:function(e,t,n){},33:function(e,t,n){},64:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(21),l=n.n(c),r=(n(30),n(5)),i=n.n(r),s=n(13),u=n(6),d=n(2);n(33);function m(e){var t=e.searchText;return o.a.createElement("div",{class:"input-group"},o.a.createElement("div",{class:"container-fluid input-group-prepend"},o.a.createElement("input",{type:"text",class:"form-control text-center",placeholder:"Search","aria-label":"Search",value:t,onChange:function(t){var n=t.target.value;e.onSearchTextChanged(n)}})))}var p=function(e){return o.a.createElement("div",{class:"container-fluid py-2 border-bottom bg-white"},o.a.createElement("div",{class:"row h-100"},o.a.createElement("div",{class:"col-6 col-sm order-1 order-sm-1 my-auto text-center text-sm-left"},o.a.createElement("button",{class:"btn btn-link text-decoration-none",type:"button",onClick:function(){e.onKeyBookClick()}},"KeyBook")),o.a.createElement("div",{class:"col-6 col-sm order-2 order-sm-3 my-auto text-center text-sm-right"},o.a.createElement("button",{class:"btn btn-link dropdown-toggle text-decoration-none",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Menu"),o.a.createElement("div",{class:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenuButton"},o.a.createElement("button",{type:"button",class:"btn-info dropdown-item",onClick:function(){e.onSetKeyClick()}},"Set Key"),o.a.createElement("button",{type:"button",class:"btn-info dropdown-item",onClick:function(){e.onSaveLocalClick()}},"Save Local"),o.a.createElement("button",{type:"button",class:"btn-info dropdown-item",onClick:function(){e.onSyncDropboxClick()}},"Save to Dropbox"),o.a.createElement("button",{type:"button",class:"btn-danger dropdown-item",onClick:function(){e.onCloseFileClick()}},"Close File"))),o.a.createElement("div",{class:"col-sm-6 order-3 order-sm-2 mt-2 mt-sm-auto mt-1"},o.a.createElement(m,{searchText:e.searchText,onSearchTextChanged:e.onSearchTextChanged}))))},f=n(22),b=n.n(f),v=n(7),g=n.n(v);n(23);function E(){return(new Date).toISOString()}function y(e){return new Date(e).getTime()}function h(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function k(e,t,n){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(i.a.mark(function e(t,n,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){for(var o=t,c=0;c<a;c++)o=g.a.AES.encrypt(o,n).toString();e(o)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e,t,n){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(i.a.mark(function e(t,n,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){for(var o=t,c=0;c<a;c++)o=g.a.AES.decrypt(o,n).toString(g.a.enc.Utf8);e(o)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e){return function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select();var n=!1;try{var a=(n=document.execCommand("copy"))?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+a)}catch(o){console.error("Fallback: Oops, unable to copy",o)}return document.body.removeChild(t),n}(e)}n(64);function S(e){var t=e.pwLen,n=e.genResult;var c,l=Object(a.useState)("normal"),r=Object(d.a)(l,2),i=r[0],s=r[1];switch(i){case"normal":c=o.a.createElement("button",{type:"button",class:"btn btn-outline-info text-center text-break w-100",onClick:u,style:{"font-size":"0.5rem"}},n);break;case"success":c=o.a.createElement("button",{type:"button",class:"btn btn-success text-center text-break w-100",onClick:u,style:{"font-size":"0.5rem"}},n);break;case"fail":c=o.a.createElement("button",{type:"button",class:"btn btn-danger text-center text-break w-100",onClick:u,style:{"font-size":"0.5rem"}},n)}function u(){var e=O(n);s(e?"success":"fail"),setTimeout(function(){s("normal")},500)}return o.a.createElement("div",{class:"collapse",id:"collapseExample"},o.a.createElement("div",{class:"mx-4 mt-2"},o.a.createElement("div",null,o.a.createElement("div",{class:"container-fluid m-0 p-0"},o.a.createElement("div",{class:"row m-0 p-0 align-items-center"},o.a.createElement("div",{class:"col-11 m-0 pr-1 pl-0"},o.a.createElement(b.a,{value:t,min:0,max:1024,orientation:"horizontal",onChange:function(t){e.setPwLen(t)}})),o.a.createElement("div",{class:"col-1 m-0 pr-0 pl-1"},o.a.createElement("button",{type:"button",class:"btn btn-outline-info w-100 btn-sm",onClick:function(){e.reGenPassword()}},"R")))),o.a.createElement("div",{class:"input-group mt-3 mb-2"},o.a.createElement("div",{class:"input-group-prepend"},o.a.createElement("span",{class:"input-group-text",id:"basic-addon1"},"Len")),o.a.createElement("input",{class:"form-control",type:"text","aria-label":"Label",value:t,onChange:function(t){var n=t.target.value;/^\d*\.?\d*$/.test(n)&&(n>1024&&(n=1024),e.setPwLen(n))}})),c)))}var I=function(){var e=Object(a.useState)(16),t=Object(d.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)("GenerateResult"),r=Object(d.a)(l,2),i=r[0],s=r[1];return Object(a.useEffect)(function(){s(n>0?h(n):"GenerateResult")},[n]),o.a.createElement("div",{class:""},o.a.createElement("div",{class:"py-2 border-top"},o.a.createElement(S,{pwLen:n,genResult:i,setPwLen:c,reGenPassword:function(){s(h(n))}}),o.a.createElement("div",{class:"mx-4 my-2 d-flex flex-row-reverse"},o.a.createElement("div",null,o.a.createElement("button",{type:"button",class:"btn btn-link text-info text-decoration-none","data-toggle":"collapse","data-target":"#collapseExample","aria-expanded":"false","aria-controls":"collapseExample"},"Key Generate")))))};function j(e){var t,n=e.name,a=e.index,c=e.activeIndex;function l(){e.onItemClick(n,a)}function r(t){"Enter"!==t.key&&" "!==t.key||e.onItemClick(n,a)}return t=a===c?o.a.createElement("div",{class:"text-break list-group-item list-group-item-action active",tabIndex:"0",onClick:l,onKeyDown:r},n):o.a.createElement("div",{class:"text-break list-group-item list-group-item-action",tabIndex:"0",onMouseOver:function(){},onFocus:function(){},onClick:l,onKeyDown:r},n),o.a.createElement("div",null,t)}function N(e){return o.a.createElement("div",{class:"text-break w-100 my-1"},o.a.createElement("button",{type:"button",class:"btn-sm btn-light w-100",onClick:function(){e.onAddClick()}},"Add Account"))}var D=function(e){var t=e.data,n=e.activeIndex;function a(t,n){e.onPwItemClick(t,n)}var c=t.map(function(e,t){return o.a.createElement(j,{key:e.id,activeIndex:n,index:t,name:e.name,onItemClick:a})});return o.a.createElement("div",null,o.a.createElement(N,{onAddClick:function(){e.onAccountAddClick()}}),o.a.createElement("div",{class:"list-group list-group-flush"},c))};function A(e){var t=e.label,n=e.value;function c(){var e=O(n);u(e?"success":"fail"),setTimeout(function(){u("normal")},500)}var l,r=Object(a.useState)("normal"),i=Object(d.a)(r,2),s=i[0],u=i[1];switch(s){case"normal":l=o.a.createElement("button",{type:"button",class:"btn btn-outline-secondary btn-sm w-100",onClick:c},"Copy");break;case"success":l=o.a.createElement("button",{type:"button",class:"btn btn-success btn-sm w-100",onClick:c},"Copy");break;case"fail":l=o.a.createElement("button",{type:"button",class:"btn btn-danger btn-sm w-100",onClick:c},"Copy")}return o.a.createElement("div",{class:"row py-1 border-top"},o.a.createElement("div",{class:"col-2 my-auto text-secondary p-0"},t),o.a.createElement("div",{id:e.copyKey,class:"col my-auto text-secondary"},n),o.a.createElement("div",{class:"col-4 my-auto p-0"},l))}function L(e){var t=e.data.map(function(e){return o.a.createElement(A,{key:e.id,copyKey:e.id,label:e.label,value:e.value})});return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{class:"row py-1 border-top text-secondary font-weight-bold"},o.a.createElement("div",{class:"col-2 my-auto p-0"},"Label"),o.a.createElement("div",{class:"col my-auto"},"Value"),o.a.createElement("div",{class:"col-4 my-auto p-0"},"Operation")),t)}function T(e){return o.a.createElement("div",{class:"my-auto py-2 border-bottom overflow-auto d-flex align-items-center"},o.a.createElement("h5",{class:"my-0 text-secondary font-italic"},e.name),o.a.createElement("button",{type:"button",class:"btn btn-link d-sm-none float-right text-decoration-none position-absolute",style:{right:"2px"},onClick:e.onBackClick},"Back"))}function J(e){var t=e.tags;return o.a.createElement("div",null,o.a.createElement("p",{class:"my-auto py-2 text-secondary"}," ",o.a.createElement("span",{class:"text-secondary font-weight-bold"},"Tags")," ",t))}function F(e){return o.a.createElement("div",null,o.a.createElement("button",{type:"button",class:"btn btn-outline-primary btn-sm w-100 my-1",onClick:function(){e.onEditClick()}},"Edit"),o.a.createElement("button",{type:"button",class:"btn btn-outline-danger btn-sm w-100 my-1",onClick:function(){e.onDeleteClick()}},"Delete"))}var B=function(e){var t,n=e.detailData;return t=n?o.a.createElement("div",null,o.a.createElement(T,{name:n.name,onBackClick:function(){e.onBackClick()}}),o.a.createElement(J,{tags:n.tags}),o.a.createElement(L,{data:n.detailList}),o.a.createElement(F,{onEditClick:function(){e.onEditClick()},onDeleteClick:function(){e.onDeleteClick()}})):o.a.createElement("div",{class:"text-center"},o.a.createElement("h5",{class:"my-1 text-secondary"},"Please choose an account :)")),o.a.createElement("div",null,t)};function K(e){var t=e.label,n=e.value;return o.a.createElement("div",{class:"row py-1 border-top"},o.a.createElement("div",{class:"input-group input-group-sm"},o.a.createElement("div",{class:"col-2 my-auto text-secondary p-0"},o.a.createElement("input",{type:"text","aria-label":"Label",value:t,onChange:function(t){var n=t.target.value;e.onLabelChange(n,e.index)},class:"form-control"})),o.a.createElement("div",{class:"col my-auto text-secondary"},o.a.createElement("input",{type:"text","aria-label":"Value",value:n,onChange:function(t){var n=t.target.value;e.onValueChange(n,e.index)},class:"form-control"})),o.a.createElement("div",{class:"col-4 my-auto p-0"},o.a.createElement("button",{type:"button",class:"btn btn-outline-secondary btn-sm w-100",onClick:function(){e.onDeleteClick(e.index)}},"Delete"))))}function P(e){function t(t,n){e.onItemInputLabelChange(t,n)}function n(t,n){e.onItemInputValueChange(t,n)}function a(t){e.onItemDeleteClick(t)}var c=e.detailList.map(function(e,c){return o.a.createElement(K,{key:e.id,label:e.label,value:e.value,index:c,onLabelChange:t,onValueChange:n,onDeleteClick:a})});return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{class:"row py-1 border-top"},o.a.createElement("div",{class:"col-2 my-auto text-secondary font-weight-bold p-0"},"Label"),o.a.createElement("div",{class:"col my-auto text-secondary font-weight-bold"},"Value"),o.a.createElement("div",{class:"col-4 my-auto text-secondary font-weight-bold p-0"},"Operation")),c,o.a.createElement("div",{class:"row py-1 border-top"},o.a.createElement("div",{class:"col-2 my-auto text-secondary font-weight-bold p-0"}),o.a.createElement("div",{class:"col my-auto text-secondary"}),o.a.createElement("div",{class:"col-4 my-auto p-0"},o.a.createElement("button",{type:"button",class:"btn btn-outline-secondary btn-sm w-100",onClick:function(){e.onAddClick()}},"Add"))))}function M(e){var t=e.name;return o.a.createElement("div",{class:"input-group my-2 pb-2 border-bottom"},o.a.createElement("div",{class:"input-group-prepend"},o.a.createElement("span",{class:"input-group-text",id:"basic-addon1"},"Name")),o.a.createElement("input",{type:"text","aria-label":"Label",value:t,onChange:function(t){var n=t.target.value;e.onNameChange(n)},class:"form-control"}))}function R(e){var t=e.tags;return o.a.createElement("div",{class:"input-group my-2"},o.a.createElement("div",{class:"input-group-prepend"},o.a.createElement("span",{class:"input-group-text",id:"basic-addon1"},"Tags")),o.a.createElement("input",{type:"text","aria-label":"Label",value:t,onChange:function(t){var n=t.target.value;e.onTagsChange(n)},class:"form-control"}))}function W(e){return o.a.createElement("div",null,o.a.createElement("button",{type:"button",class:"btn btn-outline-primary btn-sm w-100 my-1",onClick:function(){e.onOkClick()}},"OK"),o.a.createElement("button",{type:"button",class:"btn btn-outline-danger btn-sm w-100 my-1",onClick:function(){e.onCancelClick()}},"Cancel"))}var z=function(e){var t,n=e.detailData;return t=n?o.a.createElement("div",null,o.a.createElement(M,{name:n.name,onNameChange:function(t){e.onItemNameChange(t)}}),o.a.createElement(R,{tags:n.tags,onTagsChange:function(t){e.onItemInputTagsChange(t)}}),o.a.createElement(P,{detailList:n.detailList,onAddClick:function(){e.onItemAddClick()},onItemInputLabelChange:function(t,n){e.onItemInputLabelChange(t,n)},onItemInputValueChange:function(t,n){e.onItemInputValueChange(t,n)},onItemDeleteClick:function(t){e.onItemDeleteClick(t)}}),o.a.createElement(W,{onOkClick:function(){e.onOkClick(n)},onCancelClick:function(){e.onCancelClick()}})):o.a.createElement("div",{class:"text-center"},o.a.createElement("h5",{class:"my-1 text-secondary"},"Please choose an account :)")),o.a.createElement("div",null,t)};var G=function(e){var t=e.allData,n=e.showAccountId,c=e.showOption;Object(a.useEffect)(function(){if(0===t.length)y(-1),b(null),u(null);else{var e=-1;if(null!==n)for(var a=0;a<t.length;a++)if(n===t[a].id){e=a;break}y(e),e>=0&&(u(JSON.parse(JSON.stringify(t[e]))),b(JSON.parse(JSON.stringify(t[e]))))}},[t]);var l=Object(a.useState)(null),r=Object(d.a)(l,2),i=r[0],u=r[1],m=Object(a.useState)(null),p=Object(d.a)(m,2),f=p[0],b=p[1],v=Object(a.useState)(-1),g=Object(d.a)(v,2),E=g[0],y=g[1];function h(){x?e.showWaringToast("Your current account is editing, please save or cancel editing status! "):(e.addAccount(),e.setEdit(!0))}function k(t,n){n!==E?x?e.showWaringToast("Your current account is editing, please save or cancel editing status! "):(y(n),e.setShowOption("detail")):e.setShowOption("detail")}Object(a.useEffect)(function(){E>=0?(u(JSON.parse(JSON.stringify(t[E]))),b(JSON.parse(JSON.stringify(t[E])))):(b(null),u(null))},[E]);var w,C,x=e.isEdit;return w=x?o.a.createElement(z,{detailData:f,onOkClick:function(n){!function(n){e.setEdit(!1),u(JSON.parse(JSON.stringify(n))),t[E]=JSON.parse(JSON.stringify(n)),e.setShowAccountId(n.id),e.setAllData(JSON.parse(JSON.stringify(t)))}(n)},onCancelClick:function(){e.setEdit(!1),b(JSON.parse(JSON.stringify(i))),t[E]=JSON.parse(JSON.stringify(i)),e.setShowAccountId(i.id),e.setAllData(JSON.parse(JSON.stringify(t)))},onItemAddClick:function(){var e=[].concat(Object(s.a)(f.detailList),[{id:Math.random(),label:"",value:""}]),t={name:f.name,id:f.id,tags:f.tags,detailList:e};b(t)},onItemDeleteClick:function(e){var t=f.detailList.filter(function(t,n){return n!==e}),n={name:f.name,tags:f.tags,detailList:t};b(n)},onItemNameChange:function(e){f.name=e,b(JSON.parse(JSON.stringify(f)))},onItemInputLabelChange:function(e,t){f.detailList[t].label=e,b(JSON.parse(JSON.stringify(f)))},onItemInputValueChange:function(e,t){f.detailList[t].value=e,b(JSON.parse(JSON.stringify(f)))},onItemInputTagsChange:function(e){f.tags=e,b(JSON.parse(JSON.stringify(f)))}}):o.a.createElement(B,{detailData:f,onEditClick:function(){e.setEdit(!0)},onDeleteClick:function(){e.showDeleteModal(E)},onBackClick:function(){e.setShowOption("account")}}),"account"===c?C=o.a.createElement("div",{class:"row"},o.a.createElement("div",{class:"col-sm-3 border-right"},o.a.createElement(D,Object.assign({},e,{data:t,onPwItemClick:k,activeIndex:E,onAccountAddClick:h}))),o.a.createElement("div",{class:"col-sm d-none d-sm-block"},w)):"detail"===c&&(C=o.a.createElement("div",{class:"row"},o.a.createElement("div",{class:"col-sm-3 d-none d-sm-block border-right"},o.a.createElement(D,Object.assign({},e,{data:t,onPwItemClick:k,activeIndex:E,onAccountAddClick:h}))),o.a.createElement("div",{class:"col-sm d-sm-block"},w))),o.a.createElement("div",{class:"container-fluid pw-content border-bottom"},C)};function U(e,t){var n={},a=t;a.map(function(e){var t=e.tags;(t=t.split(" ")).map(function(t){n[t]||(n[t]=[]),n[t].push(e)})});var o=e,c=new Set;for(var l in n){if(l.includes(o))n[l].map(function(e){c.add(e)})}a.map(function(e){e.name.includes(o)&&c.add(e)});var r=[];return c.forEach(function(e){r.push(e)}),r.sort(function(e,t){return y(e.dateModify)-y(t.dateModify)}),r}var V=function(e){var t=e.toastId,n=e.msg,a=o.a.createElement("div",{id:t,class:"toast bg-warning position-fixed",role:"alert","aria-live":"assertive","aria-atomic":"true",style:{top:"0",left:"0",right:"0",width:"auto",height:"auto",margin:"0 auto"}},o.a.createElement("div",{class:"toast-body text-white text-center"},n));return o.a.createElement("div",null,a)};var Y=function(e){var t=e.toastId,n=e.msg,a=o.a.createElement("div",{id:t,class:"toast bg-success position-fixed",role:"alert","aria-live":"assertive","aria-atomic":"true",style:{top:"0",left:"0",right:"0",width:"auto",height:"auto",margin:"0 auto"}},o.a.createElement("div",{class:"toast-body text-white text-center"},n));return o.a.createElement("div",null,a)};var _=function(e){var t=e.toastId,n=e.msg,a=o.a.createElement("div",{id:t,class:"toast bg-danger position-fixed",role:"alert","aria-live":"assertive","aria-atomic":"true",style:{top:"0",left:"0",right:"0",width:"auto",height:"auto",margin:"0 auto"}},o.a.createElement("div",{class:"toast-body text-white text-center"},n));return o.a.createElement("div",null,a)};var X=function(e){var t=e.modalId;return o.a.createElement("div",null,o.a.createElement("div",{class:"modal fade",id:t,tabIndex:"-1",role:"dialog","aria-labelledby":"editingModalLabel","aria-hidden":"true"},o.a.createElement("div",{class:"modal-dialog",role:"document"},o.a.createElement("div",{class:"modal-content"},o.a.createElement("div",{class:"modal-header"},o.a.createElement("h5",{class:"modal-title"},"Warning"),o.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("div",{class:"modal-body"},"Are you sure to delete this account?"),o.a.createElement("div",{class:"modal-footer"},o.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:function(){e.onNoClick()}},"No"),o.a.createElement("button",{type:"button",class:"btn btn-danger","data-dismiss":"modal",onClick:function(){e.onYesClick()}},"Yes"))))))};var $=function(e){var t=e.modalId;return o.a.createElement("div",null,o.a.createElement("div",{class:"modal fade",id:t,tabIndex:"-1",role:"dialog","aria-labelledby":"editingModalLabel","aria-hidden":"true"},o.a.createElement("div",{class:"modal-dialog",role:"document"},o.a.createElement("div",{class:"modal-content"},o.a.createElement("div",{class:"modal-header"},o.a.createElement("h5",{class:"modal-title"},"Warning"),o.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("div",{class:"modal-body"},"You are closing file, be sure you have saved"),o.a.createElement("div",{class:"modal-footer"},o.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:function(){e.onNoClick()}},"No"),o.a.createElement("button",{type:"button",class:"btn btn-danger","data-dismiss":"modal",onClick:function(){e.onYesClick()}},"Yes"))))))},q=n(3),H=n.n(q);var Q=function(e){var t=e.modalId,n=e.userKey,c=Object(a.useState)(""),l=Object(d.a)(c,2),r=l[0],i=l[1];return o.a.createElement("div",null,o.a.createElement("div",{class:"modal fade",id:t,tabIndex:"-1",role:"dialog","aria-labelledby":"editingModalLabel","aria-hidden":"true"},o.a.createElement("div",{class:"modal-dialog",role:"document"},o.a.createElement("div",{class:"modal-content"},o.a.createElement("div",{class:"modal-header"},o.a.createElement("h5",{class:"modal-title"},"Set Key"),o.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("div",{class:"modal-body"},o.a.createElement("div",{class:"form-group my-0",id:"userKeyGroup"},o.a.createElement("input",{type:"password",class:"form-control",value:n,placeholder:"New key",onChange:function(t){e.onUserKeyChange(t.target.value)}}),o.a.createElement("input",{type:"password",class:"form-control mt-2",value:r,placeholder:"Confirm it",onChange:function(e){i(e.target.value)}}))),o.a.createElement("div",{class:"modal-footer"},o.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:function(){e.onCancelClick()}},"Cancel"),o.a.createElement("button",{type:"button",class:"btn btn-danger",onClick:function(){n!==r?(H()("#userKeyGroup").addClass("shake-horizontal"),H()("#userKeyGroup > input").addClass("btn-outline-danger"),H()("#userKeyGroup").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){H()("#userKeyGroup").removeClass("shake-horizontal btn-danger"),H()("#userKeyGroup > input").removeClass("btn-outline-danger")})):(e.onConfirmClick(),H()("#".concat(t)).modal("hide"))}},"Confirm"))))))};var Z=function(e){var t=e.modalId;return o.a.createElement("div",null,o.a.createElement("div",{class:"modal fade",id:t,tabIndex:"-1",role:"dialog","aria-labelledby":"editingModalLabel","aria-hidden":"true"},o.a.createElement("div",{class:"modal-dialog",role:"document"},o.a.createElement("div",{class:"modal-content"},o.a.createElement("div",{class:"modal-header"},o.a.createElement("h5",{class:"modal-title"},"KeeBook"),o.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("div",{class:"modal-body"},"Version: 0.1.0 ",o.a.createElement("br",null),"Developed by KuthorX"),o.a.createElement("div",{class:"modal-footer"},o.a.createElement("button",{type:"button",class:"btn btn-outline-primary","data-dismiss":"modal"},"I see"))))))};var ee=function(e){var t;return e.ifShow&&(t=o.a.createElement("div",{class:"position-fixed vw-100 vh-100",style:{top:"0",left:"0",backgroundColor:"rgba(0, 0, 0, 0.0618)",zIndex:999}},o.a.createElement("div",{class:"position-absolute spinner-border text-primary",style:{top:"38.2%",left:"0",right:"0",margin:"auto"},role:"status"},o.a.createElement("span",{class:"sr-only"},"Loading...")))),o.a.createElement("div",null,t)};n(65);var te=function(e){var t,n=e.ifFileOpen,c=Object(a.useRef)(),l=e.inputPw,r=e.fileName;function i(){e.onPwOkClick()}return Object(a.useEffect)(function(){n&&c.current.focus()}),t=n?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{class:"w-100 h-100 bg-light"},o.a.createElement("div",{class:"container w-100 h-100 align-items-center d-flex justify-content-center"},o.a.createElement("div",{className:"row w-100"},o.a.createElement("div",{class:"col"},o.a.createElement("h1",{class:"text-center text-primary"},"Key Book"),o.a.createElement("h2",{class:"text-center text-primary"},"Manager your keys"),o.a.createElement("h3",null,r),o.a.createElement("div",{class:"form-group mt-3",id:"inputPw"},o.a.createElement("input",{type:"email",class:"form-control",value:l,onChange:function(t){e.onInputPwChange(t.target.value)},ref:c,placeholder:"Type your password",onKeyDown:function(e){"Enter"===e.key&&i()}})),o.a.createElement("button",{type:"button",class:"btn btn-outline-primary btn-sm w-100 mt-1 text-center",onClick:i},"Ok"),o.a.createElement("button",{type:"button",class:"btn btn-outline-danger btn-sm w-100 mt-2 text-center",onClick:function(){e.onPwCancelClick()}},"Cancel")))))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{class:"w-100 h-100 bg-light"},o.a.createElement("div",{class:"container w-100 h-100 align-items-center d-flex justify-content-center"},o.a.createElement("div",{className:"row w-100"},o.a.createElement("div",{class:"col"},o.a.createElement("h1",{class:"text-center text-primary"},"Key Book"),o.a.createElement("h2",{class:"text-center text-primary"},"Manage your keys"),o.a.createElement("button",{type:"button",class:"btn btn-outline-secondary btn-sm w-100 mt-3 text-center",onClick:function(){e.onNewFileClick()}},"New File"),o.a.createElement("button",{type:"button",class:"btn btn-outline-secondary btn-sm w-100 mt-3 text-center",onClick:function(){e.onOpenFileClick()}},"Open Local File"),o.a.createElement("button",{id:"openDropboxFileButton",type:"button",class:"btn btn-outline-secondary btn-sm w-100 mt-3 text-center",onClick:function(){e.onOpenDropBoxFileClick()}},"Open Dropbox File")))))),o.a.createElement(o.a.Fragment,null,t)},ne=n(24);function ae(){var e=n(16),t=new(0,n(17).Dropbox)({fetch:e,clientId:"8w80g7hb3h4ahb5"}).getAuthenticationUrl("http://localhost:3000/auth");window.open(t)}function oe(e,t,a,o){var c=n(16);new(0,n(17).Dropbox)({fetch:c,accessToken:e}).filesUpload({contents:t,path:"/data.json",mode:{".tag":"overwrite"},autorename:!1}).then(a,o)}n(67);var ce=function(){var e="warningToastId",t=Object(a.useState)({msg:""}),c=Object(d.a)(t,2),l=c[0],r=c[1],m="successToastId",f=Object(a.useState)({msg:""}),b=Object(d.a)(f,2),v=b[0],g=b[1],y="failToastId",h=Object(a.useState)({msg:""}),w=Object(d.a)(h,2),x=w[0],O=w[1],S="deleteModal",j=Object(a.useState)({targetIndex:-1}),N=Object(d.a)(j,2),D=N[0],A=N[1],L="closeModal",T=Object(a.useState)(!1),J=Object(d.a)(T,2),F=J[0],B=J[1],K="setKeyModal",P="keyBookModal";Object(a.useEffect)(function(){for(var e=window.location.hash.substring(1),t={},n=e.length>0?e.split("&"):[],a=0;a<n.length;a++){var o=n[a].split("="),c=decodeURIComponent(o[0]),l=decodeURIComponent(o[1]);c.length>0&&(t[c]=l)}t.access_token&&(H.a.cookie("dropbox_token",t.access_token),window.location.href="/")},[]);var M=Object(a.useState)(null),R=Object(d.a)(M,2),W=R[0],z=R[1],q=Object(a.useState)(!1),ce=Object(d.a)(q,2),le=ce[0],re=ce[1],ie=Object(a.useState)(11),se=Object(d.a)(ie,2),ue=se[0];function de(e){e&&(z(JSON.parse(e)),re(!0))}function me(e){console.log(e)}function pe(){return(pe=Object(u.a)(i.a.mark(function e(){var t,n,a,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Ue(),t=W.cipherText,n=W.encryptTime,a=W.plainText,e.next=6,k(a,lt,n);case 6:if(o=e.sent,t!==o){e.next=19;break}return e.t0=JSON,e.next=11,C(W.data,lt,ue);case 11:e.t1=e.sent,c=e.t0.parse.call(e.t0,e.t1),ge(c),ke(c),et(!1),re(!1),e.next=23;break;case 19:H()("#inputPw").addClass("shake-horizontal"),H()("#inputPw > input").addClass("btn-outline-danger"),H()("#inputPw").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){H()("#inputPw").removeClass("shake-horizontal btn-danger"),H()("#inputPw > input").removeClass("btn-outline-danger")});case 23:Ve();case 24:case"end":return e.stop()}},e)}))).apply(this,arguments)}se[1];var fe=Object(a.useState)(null),be=Object(d.a)(fe,2),ve=be[0],ge=be[1];Object(a.useEffect)(function(){ve&&ke(U(Xe,ve))},[ve]);var Ee=Object(a.useState)(JSON.parse(JSON.stringify(ve))),ye=Object(d.a)(Ee,2),he=ye[0],ke=ye[1],we=Object(a.useState)(null),Ce=Object(d.a)(we,2),xe=Ce[0],Oe=Ce[1],Se=Object(a.useState)(!1),Ie=Object(d.a)(Se,2),je=Ie[0],Ne=Ie[1],De=Object(a.useState)("account"),Ae=Object(d.a)(De,2),Le=Ae[0],Te=Ae[1];function Je(e){var t={};e.map(function(e){t[e.id]||(t[e.id]=e)}),ve.map(function(e){t[e.id]||(t[e.id]=e)});var n=[];for(var a in t)n.push(t[a]);ge(n)}function Fe(t){r({msg:t}),H()("#".concat(e)).toast({delay:3e3}).toast("show")}var Be=Object(a.useState)(""),Ke=Object(d.a)(Be,2),Pe=Ke[0],Me=Ke[1];function Re(){return(Re=Object(u.a)(i.a.mark(function e(){var t,n,a,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Ue(),e.next=3,k(JSON.stringify(ve),lt,ue);case 3:return t=e.sent,e.next=6,k("12345",lt,ue);case 6:n=e.sent,a={plainText:"12345",ciphertext:n,encryptTime:ue,data:t,date:E()},o=JSON.stringify(a),c=new Blob([o],{type:"text/plain;charset=utf-8"}),Object(ne.saveAs)(c,"keybook-data.json"),Ve();case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function We(){return(We=Object(u.a)(i.a.mark(function e(){var t,n,a,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ue(),t=H.a.cookie("dropbox_token")){e.next=7;break}ae(),Ve(),e.next=16;break;case 7:return e.next=9,k(JSON.stringify(ve),lt,ue);case 9:return n=e.sent,e.next=12,k("12345",lt,ue);case 12:a=e.sent,o={plainText:"12345",ciphertext:a,encryptTime:ue,data:n,date:E()},c=JSON.stringify(o),oe(t,c,function(e){console.log("saveFileToDropBox succeed"),ze("Save to DropBox Succeed"),Ve()},function(e){console.log("saveFileToDropBox fail"),console.log(e),Ge("Save to DropBox Fail"),Ve()});case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ze(e){g({msg:e}),H()("#".concat(m)).toast({delay:2500}).toast("show")}function Ge(e){O({msg:e}),H()("#".concat(y)).toast({delay:2500}).toast("show")}function Ue(){B(!0)}function Ve(){B(!1)}var Ye=Object(a.useState)(""),_e=Object(d.a)(Ye,2),Xe=_e[0],$e=_e[1];Object(a.useEffect)(function(){if(Te("account"),ve){var e=U(Xe,ve);ke(e)}},[Xe]);var qe,He=Object(a.useState)(!0),Qe=Object(d.a)(He,2),Ze=Qe[0],et=Qe[1],tt=Object(a.useState)(""),nt=Object(d.a)(tt,2),at=nt[0],ot=(nt[1],Object(a.useState)("")),ct=Object(d.a)(ot,2),lt=ct[0],rt=ct[1];return qe=Ze?o.a.createElement(o.a.Fragment,null,o.a.createElement(te,{onNewFileClick:function(){ge([]),ke([]),et(!1)},onOpenFileClick:function(){!function(e,t){var n=document.createElement("input");n.type="file",n.onchange=function(n){var a=n.target.files[0],o=new FileReader;o.readAsText(a,"UTF-8"),o.onload=function(t){var n=t.target.result;e(n)},o.onerror=function(e){var n=o.error;t(n)}},n.click()}(de,me)},onOpenDropBoxFileClick:function(){Ue();var e=H.a.cookie("dropbox_token");e?function(e,t,a){var o=n(16),c=n(17).Dropbox;new c({fetch:o,accessToken:e}).filesListFolder({path:""}).then(function(n){for(var l=n.entries,r="",i=0;i<l.length;i++)"data.json"===l[i].name&&(r=l[i].path_display);if(""===r)return a("cannot find any");new c({fetch:o,accessToken:e}).filesDownload({path:r}).then(function(e){var n=e.fileBlob,a=new FileReader;a.addEventListener("loadend",function(e){var n=e.target.result;t(n)}),a.readAsText(n,"utf-8")},function(e){a(e)})},function(e){a(e)})}(e,function(e){console.log("openFileFromDropBox succeed"),z(JSON.parse(e)),re(!0),Ve()},function(e){console.log("openFileFromDropBox fail"),console.log(e),Ve(),H()("#openDropboxFileButton").addClass("shake-horizontal"),H()("#openDropboxFileButton").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){H()("#openDropboxFileButton").removeClass("shake-horizontal btn-danger")}),Ge("Save to DropBox Fail")}):ae()},ifFileOpen:le,fileName:at,inputPw:lt,onInputPwChange:function(e){rt(e)},onPwOkClick:function(){return pe.apply(this,arguments)},onPwCancelClick:function(){re(!1)}})):o.a.createElement(o.a.Fragment,null,o.a.createElement("header",null,o.a.createElement(p,{onKeyBookClick:function(){H()("#".concat(P)).modal("show")},searchText:Xe,onSearchTextChanged:function(e){je?Fe("Your current account is editing, please save or cancel editing status! "):(Oe(null),$e(e))},onSetKeyClick:function(){H()("#".concat(K)).modal("show")},onSaveLocalClick:function(){return Re.apply(this,arguments)},onSyncDropboxClick:function(){return We.apply(this,arguments)},onCloseFileClick:function(){H()("#".concat(L)).modal("show")}})),o.a.createElement("main",null,o.a.createElement(G,{isEdit:je,setEdit:Ne,showAccountId:xe,allData:he,setAllData:Je,setShowAccountId:Oe,showWaringToast:Fe,showDeleteModal:function(e){var t={};t.targetIndex=e,A(t),H()("#".concat(S)).modal("show")},addAccount:function(){var e=Math.random(),t=[{id:e,name:"New Account",tags:"",dateCreate:(new Date).toISOString(),dateModify:(new Date).toISOString(),detailList:[]}].concat(Object(s.a)(ve));$e(""),Je(t),Oe(e),Te("detail")},showOption:Le,setShowOption:Te})),o.a.createElement("footer",null,o.a.createElement(I,null))),o.a.createElement("div",{className:"App"},qe,o.a.createElement(Z,{modalId:P}),o.a.createElement(X,{modalId:S,onNoClick:function(){},onYesClick:function(){var e=D.targetIndex,t=he[e],n=ve.filter(function(e){return e.id!==t.id});ge(n),Te("account")}}),o.a.createElement($,{modalId:L,onNoClick:function(){},onYesClick:function(){et(!0),re(!1),ge(null)}}),o.a.createElement(Q,{modalId:K,userKey:Pe,onUserKeyChange:function(e){Me(e)},onCancelClick:function(){},onConfirmClick:function(){rt(Pe),Me("")}}),o.a.createElement(V,{toastId:e,msg:l.msg}),o.a.createElement(Y,{toastId:m,msg:v.msg}),o.a.createElement(_,{toastId:y,msg:x.msg}),o.a.createElement(ee,{ifShow:F}))},le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}l.a.render(o.a.createElement(ce,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");le?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):re(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):re(t,e)})}}()}},[[25,1,2]]]);
//# sourceMappingURL=main.cedd1021.chunk.js.map